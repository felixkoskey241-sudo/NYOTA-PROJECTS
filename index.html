<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYOTA - National Youth Opportunities</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --kenya-black: #000;
            --kenya-red: #BB0000;
            --kenya-green: #2d7a4f;
            --kenya-navy: #1a2856;
            --kenya-gold: #FFD700;
        }
        
        body {
            font-family: 'Arial Black', Arial, sans-serif;
            background: white;
            min-height: 100vh;
        }
        
        .layer { display: none; min-height: 100vh; }
        .layer.active { display: block; }
        
        /* Navbar */
        .navbar {
            background: var(--kenya-navy);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }
        
        .logo-nav {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--kenya-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 900;
            color: var(--kenya-green);
        }
        
        .nav-btn {
            padding: 10px 24px;
            border: 2px solid var(--kenya-green);
            border-radius: 10px;
            background: transparent;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-btn:hover, .nav-btn.primary {
            background: var(--kenya-green);
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .card-title {
            font-size: 32px;
            font-weight: 900;
            color: var(--kenya-green);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            font-size: 14px;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 15px;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--kenya-green);
        }
        
        .btn-submit {
            width: 100%;
            padding: 18px;
            background: var(--kenya-green);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
        }
        
        .btn-submit:hover {
            background: #246a42;
        }
        
        .balance-card {
            background: linear-gradient(135deg, var(--kenya-green), #246a42);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            margin: 30px 0;
        }
        
        .balance-amount {
            font-size: 52px;
            font-weight: 900;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .action-btn {
            padding: 30px 20px;
            border: none;
            border-radius: 16px;
            font-weight: 800;
            font-size: 16px;
            cursor: pointer;
            color: white;
            text-transform: uppercase;
        }
        
        /* M-Pesa STK Push Popup */
        .stk-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }
        
        .stk-popup.active {
            display: flex;
        }
        
        .stk-content {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        
        .stk-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .stk-title {
            font-size: 24px;
            font-weight: 900;
            color: var(--kenya-navy);
            margin-bottom: 15px;
        }
        
        .stk-message {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333;
        }
        
        .stk-amount {
            font-size: 48px;
            font-weight: 900;
            color: var(--kenya-green);
            margin: 20px 0;
        }
        
        .stk-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--kenya-green);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            background: white;
            border: 3px solid var(--kenya-green);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            z-index: 10001;
            display: none;
            font-weight: 600;
            max-width: 400px;
        }
        
        .toast.show { display: block; animation: slideIn 0.4s; }
        
        @keyframes slideIn {
            from { transform: translateX(500px); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>

<div id="toast" class="toast"></div>

<!-- STK Push Popup -->
<div id="stkPopup" class="stk-popup">
    <div class="stk-content">
        <div class="stk-icon">üì±</div>
        <div class="stk-title">M-Pesa Payment Request</div>
        <div class="stk-message" id="stkMessage">
            Check your phone for M-Pesa prompt
        </div>
        <div class="stk-amount" id="stkAmount">Ksh 0</div>
        <div class="stk-spinner"></div>
        <p style="color: #666; font-size: 14px; margin-top: 20px;">
            Enter your M-Pesa PIN on your phone to complete payment
        </p>
    </div>
</div>

<!-- WELCOME LAYER -->
<div id="welcomeLayer" class="layer active">
    <div style="position: relative; min-height: 100vh; background: linear-gradient(135deg, #1a2856 0%, #1a2856 50%, #2d7a4f 50%, #2d7a4f 100%); display: flex; align-items: center; justify-content: center; padding: 40px 20px;">
        
        <div style="max-width: 700px; background: white; border-radius: 30px; padding: 50px 40px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px;">
                <div style="font-size: 76px; font-weight: 900; color: #2d7a4f; letter-spacing: 3px;">NYOTA</div>
                <div style="display: grid; grid-template-columns: repeat(2, 45px); grid-template-rows: repeat(2, 45px); gap: 10px;">
                    <div style="background: #000; border-radius: 8px;"></div>
                    <div style="background: #BB0000; border-radius: 8px;"></div>
                    <div style="background: #006600; border-radius: 8px;"></div>
                    <div style="background: #0066CC; border-radius: 8px;"></div>
                </div>
            </div>
            
            <div style="font-size: 28px; font-weight: 900; line-height: 1.2; margin-bottom: 10px;">
                NATIONAL YOUTH<br>OPPORTUNITIES<br>TOWARDS ADVANCEMENT
            </div>
            
            <div style="font-size: 28px; font-weight: 700; font-style: italic; margin: 25px 0;">
                Kuza, Imarisha, Endeza Vijana!
            </div>
            
            <div style="display: inline-block; background: #FFD700; color: #1a2856; padding: 22px 80px; border-radius: 30px; font-size: 40px; font-weight: 900; margin-bottom: 40px;">
                SECOND PHASE
            </div>
            
            <button onclick="showLayer('signupLayer')" style="width: 100%; background: #1a2856; color: white; padding: 28px; border: none; border-radius: 18px; font-size: 44px; font-weight: 900; cursor: pointer;">
                APPLY NOW
            </button>
        </div>
    </div>
</div>

<!-- SIGNUP LAYER -->
<div id="signupLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('loginLayer')">Login</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Register for NYOTA</h2>
            <form onsubmit="return handleSignup(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label>Phone Number (M-Pesa)</label>
                    <input type="tel" id="signupPhone" required placeholder="254712345678" pattern="254[0-9]{9}">
                    <small style="color: #666;">Enter in format: 254712345678</small>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signupPassword" required>
                </div>
                <div class="form-group">
                    <label>Registration Package</label>
                    <select id="signupPackage" required>
                        <option value="">Select package</option>
                        <option value="1000">Starter - Ksh 1,000 (Get Ksh 12,500 bonus)</option>
                        <option value="2000">Premium - Ksh 2,000 (Get Ksh 25,000 bonus)</option>
                        <option value="5000">Elite - Ksh 5,000 (Get Ksh 50,000 bonus)</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit">Register & Pay with M-Pesa</button>
            </form>
        </div>
    </div>
</div>

<!-- LOGIN LAYER -->
<div id="loginLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('signupLayer')">Sign Up</button>
    </nav>

    <div class="container" style="max-width: 500px;">
        <div class="card">
            <h2 class="card-title">Welcome Back</h2>
            <form onsubmit="return handleLogin(event)">
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="loginPhone" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn-submit">Login</button>
            </form>
        </div>
    </div>
</div>

<!-- DASHBOARD LAYER -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="logout()">Logout</button>
    </nav>

    <div class="container">
        <h2 style="font-size: 36px; font-weight: 900; margin-bottom: 10px;">Habari, <span id="userName">Youth</span>!</h2>
        
        <div class="balance-card">
            <div style="font-size: 16px; margin-bottom: 10px; opacity: 0.9;">Portfolio Value</div>
            <div class="balance-amount" id="balance">Ksh 0</div>
        </div>

        <div class="action-grid">
            <button class="action-btn" style="background: var(--kenya-green);" onclick="showLayer('investLayer')">üí∞ Invest</button>
            <button class="action-btn" style="background: #0066CC;" onclick="showLayer('withdrawLayer')">üí∏ Withdraw</button>
            <button class="action-btn" style="background: var(--kenya-red);">üéÅ Referrals</button>
            <button class="action-btn" style="background: var(--kenya-gold); color: #000;">‚öôÔ∏è Profile</button>
        </div>
    </div>
</div>

<!-- INVEST LAYER -->
<div id="investLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Make Investment</h2>
            <form onsubmit="return handleInvest(event)">
                <div class="form-group">
                    <label>Investment Amount (Ksh)</label>
                    <input type="number" id="investAmount" min="1000" step="100" required placeholder="Enter amount">
                </div>
                <div class="form-group">
                    <label>Investment Plan</label>
                    <select id="investPlan" required>
                        <option value="">Select plan</option>
                        <option value="starter">Starter - 8% monthly returns</option>
                        <option value="premium">Premium - 12% monthly returns</option>
                        <option value="elite">Elite - 15% monthly returns</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit">Pay with M-Pesa</button>
            </form>
        </div>
    </div>
</div>

<!-- WITHDRAW LAYER -->
<div id="withdrawLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Request Withdrawal</h2>
            <form onsubmit="return handleWithdraw(event)">
                <div class="form-group">
                    <label>Withdrawal Amount (Ksh)</label>
                    <input type="number" id="withdrawAmount" min="500" required>
                </div>
                <div class="form-group">
                    <label>M-Pesa Number</label>
                    <input type="tel" id="withdrawPhone" placeholder="254712345678" required>
                </div>
                <button type="submit" class="btn-submit">Request Withdrawal</button>
            </form>
        </div>
    </div>
</div>

<script>
// State
let currentUser = null;

// Navigation
function showLayer(id) {
    document.querySelectorAll('.layer').forEach(l => l.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    
    if (id === 'dashboardLayer' && currentUser) {
        document.getElementById('userName').textContent = currentUser.name;
        document.getElementById('balance').textContent = `Ksh ${currentUser.balance.toLocaleString()}`;
    }
}

// M-Pesa STK Push Simulation
function initiateSTKPush(phone, amount, purpose) {
    const popup = document.getElementById('stkPopup');
    const amountEl = document.getElementById('stkAmount');
    const messageEl = document.getElementById('stkMessage');
    
    amountEl.textContent = `Ksh ${amount.toLocaleString()}`;
    messageEl.textContent = `Do you want to ${purpose} Ksh ${amount.toLocaleString()} to NYOTA Investment?`;
    
    popup.classList.add('active');
    
    // Simulate STK push process (in real implementation, this would call M-Pesa Daraja API)
    setTimeout(() => {
        popup.classList.remove('active');
        toast(`‚úÖ Payment Successful!\n\nKsh ${amount.toLocaleString()} paid via M-Pesa\nTransaction ID: ${generateTxID()}`);
    }, 4000);
}

function generateTxID() {
    return 'QH' + Math.random().toString(36).substr(2, 8).toUpperCase();
}

// Signup with M-Pesa Payment
function handleSignup(e) {
    e.preventDefault();
    
    const name = document.getElementById('signupName').value;
    const phone = document.getElementById('signupPhone').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    const packageAmount = parseInt(document.getElementById('signupPackage').value);
    
    if (!packageAmount) {
        toast('‚ùå Please select a package!');
        return false;
    }
    
    const bonusMap = {
        1000: 12500,
        2000: 25000,
        5000: 50000
    };
    
    // Initiate M-Pesa payment
    initiateSTKPush(phone, packageAmount, 'register with');
    
    // After "payment" completes (in real app, this would be in callback)
    setTimeout(() => {
        currentUser = {
            name: name,
            phone: phone,
            email: email,
            balance: bonusMap[packageAmount],
            investments: []
        };
        
        localStorage.setItem('nyotaUser', JSON.stringify(currentUser));
        
        toast(`üéâ WELCOME ${name.toUpperCase()}!\n\n‚úÖ Registration Successful\nüí∞ Bonus: Ksh ${bonusMap[packageAmount].toLocaleString()}\nüöÄ Account Activated!`);
        
        setTimeout(() => showLayer('dashboardLayer'), 2000);
    }, 4500);
    
    return false;
}

// Login
function handleLogin(e) {
    e.preventDefault();
    
    const stored = JSON.parse(localStorage.getItem('nyotaUser'));
    
    if (!stored) {
        toast('‚ùå No account found. Please register first!');
        return false;
    }
    
    currentUser = stored;
    toast(`‚úÖ Welcome back, ${currentUser.name}!`);
    setTimeout(() => showLayer('dashboardLayer'), 1500);
    return false;
}

// Investment with M-Pesa
function handleInvest(e) {
    e.preventDefault();
    
    if (!currentUser) {
        toast('‚ùå Please login first!');
        return false;
    }
    
    const amount = parseInt(document.getElementById('investAmount').value);
    const plan = document.getElementById('investPlan').value;
    
    if (!plan) {
        toast('‚ùå Please select an investment plan!');
        return false;
    }
    
    // Initiate M-Pesa payment
    initiateSTKPush(currentUser.phone, amount, 'invest');
    
    // After "payment" completes
    setTimeout(() => {
        currentUser.balance += amount;
        localStorage.setItem('nyotaUser', JSON.stringify(currentUser));
        
        toast(`‚úÖ Investment Successful!\n\nAmount: Ksh ${amount.toLocaleString()}\nPlan: ${plan.toUpperCase()}\nYour investment is active!`);
        
        setTimeout(() => showLayer('dashboardLayer'), 2000);
    }, 4500);
    
    return false;
}

// Withdrawal
function handleWithdraw(e) {
    e.preventDefault();
    
    const amount = parseInt(document.getElementById('withdrawAmount').value);
    const phone = document.getElementById('withdrawPhone').value;
    
    if (!currentUser || currentUser.balance < amount) {
        toast('‚ùå Insufficient balance!');
        return false;
    }
    
    toast(`‚úÖ Withdrawal Requested!\n\nAmount: Ksh ${amount.toLocaleString()}\nM-Pesa: ${phone}\nProcessing within 24 hours`);
    
    setTimeout(() => showLayer('dashboardLayer'), 2000);
    return false;
}

// Logout
function logout() {
    currentUser = null;
    toast('üëã Asante! See you soon!');
    setTimeout(() => showLayer('welcomeLayer'), 1500);
}

// Toast
function toast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 5000);
}

console.log('‚úÖ NYOTA Fund - M-Pesa Integrated Platform');
console.log('üá∞üá™ Kuza, Imarisha, Endeza Vijana!');
</script>

</body>
</html>
