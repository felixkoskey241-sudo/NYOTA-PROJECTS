<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYOTA - National Youth Opportunities</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --kenya-black: #000;
            --kenya-red: #BB0000;
            --kenya-green: #2d7a4f;
            --kenya-navy: #1a2856;
            --kenya-gold: #FFD700;
        }
        
        body {
            font-family: 'Arial Black', Arial, sans-serif;
            background: white;
            min-height: 100vh;
        }
        
        /* Layer System */
        .layer { display: none; min-height: 100vh; }
        .layer.active { display: block; }
        
        /* Navbar */
        .navbar {
            background: var(--kenya-navy);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }
        
        .logo-nav {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--kenya-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 900;
            color: var(--kenya-green);
        }
        
        .nav-btn {
            padding: 10px 24px;
            border: 2px solid var(--kenya-green);
            border-radius: 10px;
            background: transparent;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .nav-btn:hover, .nav-btn.primary {
            background: var(--kenya-green);
            color: white;
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .card-title {
            font-size: 32px;
            font-weight: 900;
            color: var(--kenya-green);
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            font-size: 14px;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--kenya-green);
        }
        
        .btn-submit {
            width: 100%;
            padding: 18px;
            background: var(--kenya-green);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .btn-submit:hover {
            background: #246a42;
            transform: translateY(-2px);
        }
        
        /* Packages Grid */
        .packages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .package-card {
            background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
            border: 3px solid var(--kenya-green);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(45, 122, 79, 0.3);
        }
        
        .package-card.selected {
            border-color: var(--kenya-gold);
            background: linear-gradient(135deg, #fff8dc 0%, #fffacd 100%);
        }
        
        .package-name {
            font-size: 28px;
            font-weight: 900;
            color: var(--kenya-navy);
            margin-bottom: 15px;
        }
        
        .package-price {
            font-size: 22px;
            color: var(--kenya-red);
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .package-bonus {
            font-size: 48px;
            font-weight: 900;
            color: var(--kenya-green);
            margin: 15px 0;
        }
        
        .package-features {
            list-style: none;
            margin: 20px 0;
            text-align: left;
        }
        
        .package-features li {
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }
        
        /* Payment Methods */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .payment-method {
            padding: 20px;
            border: 3px solid #ddd;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-method:hover, .payment-method.selected {
            border-color: var(--kenya-green);
            background: #f0fff0;
        }
        
        .payment-details {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }
        
        .payment-details.active {
            display: block;
        }
        
        .payment-info {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid var(--kenya-green);
        }
        
        .payment-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 5px;
        }
        
        .payment-value {
            font-size: 20px;
            font-weight: 900;
            color: var(--kenya-green);
            font-family: 'Courier New', monospace;
        }
        
        .copy-btn {
            width: 100%;
            padding: 12px;
            background: var(--kenya-navy);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* Dashboard */
        .balance-card {
            background: linear-gradient(135deg, var(--kenya-green), #246a42);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            margin: 30px 0;
        }
        
        .balance-label {
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .balance-amount {
            font-size: 52px;
            font-weight: 900;
        }
        
        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .action-btn {
            padding: 30px 20px;
            border: none;
            border-radius: 16px;
            font-weight: 800;
            font-size: 16px;
            cursor: pointer;
            color: white;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            background: white;
            border: 3px solid var(--kenya-green);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            z-index: 10000;
            display: none;
            font-weight: 600;
            line-height: 1.5;
            max-width: 400px;
        }
        
        .toast.show { 
            display: block; 
            animation: slideIn 0.4s;
        }
        
        @keyframes slideIn {
            from { transform: translateX(500px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* AI Chat */
        .ai-chat-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: var(--kenya-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(45, 122, 79, 0.4);
            z-index: 999;
            border: 4px solid white;
        }
        
        .ai-chat-window {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
            border: 3px solid var(--kenya-green);
        }
        
        .ai-chat-window.open { display: flex; }
        
        .ai-chat-header {
            background: var(--kenya-green);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ai-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f5f5f5;
        }
        
        .ai-message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 80%;
        }
        
        .ai-message.bot {
            background: white;
            margin-right: auto;
        }
        
        .ai-message.user {
            background: var(--kenya-green);
            color: white;
            margin-left: auto;
        }
        
        .ai-chat-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        
        .ai-chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 20px;
            outline: none;
        }
        
        .ai-chat-send {
            width: 48px;
            height: 48px;
            background: var(--kenya-green);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .packages-grid { grid-template-columns: 1fr; }
            .payment-methods { grid-template-columns: 1fr; }
            .ai-chat-window { width: 100%; height: 100%; bottom: 0; right: 0; border-radius: 0; }
        }
    </style>
</head>
<body>

<div id="toast" class="toast"></div>

<!-- AI Chat -->
<div class="ai-chat-btn" onclick="toggleChat()">
    <span style="font-size: 36px;">ü§ñ</span>
</div>

<div class="ai-chat-window" id="chatWindow">
    <div class="ai-chat-header">
        <div style="font-weight: 800;">NYOTA AI Assistant</div>
        <button onclick="toggleChat()" style="background: rgba(255,255,255,0.2); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; font-size: 24px;">√ó</button>
    </div>
    <div class="ai-chat-messages" id="chatMessages"></div>
    <div class="ai-chat-input-area">
        <input type="text" class="ai-chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="if(event.key==='Enter') sendMsg()">
        <button class="ai-chat-send" onclick="sendMsg()">‚Üí</button>
    </div>
</div>

<!-- LAYER 1: WELCOME -->
<div id="welcomeLayer" class="layer active">
    <div style="position: relative; min-height: 100vh; background: linear-gradient(135deg, #1a2856 0%, #1a2856 50%, #2d7a4f 50%, #2d7a4f 100%); display: flex; align-items: center; justify-content: center; padding: 40px 20px;">
        
        <!-- Confetti -->
        <div id="confetti"></div>
        
        <!-- Content -->
        <div style="max-width: 700px; background: white; border-radius: 30px; padding: 50px 40px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative; z-index: 10;">
            
            <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px;">
                <div style="font-size: 76px; font-weight: 900; color: #2d7a4f; letter-spacing: 3px;">NYOTA</div>
                <div style="display: grid; grid-template-columns: repeat(2, 45px); grid-template-rows: repeat(2, 45px); gap: 10px;">
                    <div style="background: #000; border-radius: 8px;"></div>
                    <div style="background: #BB0000; border-radius: 8px;"></div>
                    <div style="background: #006600; border-radius: 8px;"></div>
                    <div style="background: #0066CC; border-radius: 8px;"></div>
                </div>
            </div>
            
            <div style="font-size: 28px; font-weight: 900; line-height: 1.2; margin-bottom: 10px;">
                NATIONAL YOUTH<br>OPPORTUNITIES<br>TOWARDS ADVANCEMENT
            </div>
            
            <div style="font-size: 28px; font-weight: 700; font-style: italic; margin: 25px 0;">
                Kuza, Imarisha, Endeza Vijana!
            </div>
            
            <div style="display: inline-block; background: #FFD700; color: #1a2856; padding: 22px 80px; border-radius: 30px; font-size: 40px; font-weight: 900; margin-bottom: 40px; box-shadow: 0 8px 20px rgba(255,215,0,0.4);">
                SECOND PHASE
            </div>
            
            <button onclick="showLayer('packagesLayer')" style="width: 100%; background: #1a2856; color: white; padding: 28px; border: none; border-radius: 18px; font-size: 44px; font-weight: 900; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                APPLY NOW
            </button>
        </div>
    </div>
</div>

<!-- LAYER 2: PACKAGES -->
<div id="packagesLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn primary" onclick="showLayer('signupLayer')">Register</button>
    </nav>

    <div class="container">
        <div class="card">
            <h2 class="card-title">Choose Your Package</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">Select a registration package and get instant bonus!</p>
            
            <div class="packages-grid">
                <div class="package-card" onclick="selectPackage('starter', 1000, 12500)">
                    <div class="package-name">üí´ Starter</div>
                    <div class="package-price">Pay Ksh 1,000</div>
                    <div class="package-bonus">Ksh 12,500</div>
                    <p style="color: var(--kenya-red); font-weight: 700; margin-bottom: 20px;">Instant Bonus!</p>
                    <ul class="package-features">
                        <li>‚úì Ksh 12,500 Instant Credit</li>
                        <li>‚úì 8% Monthly Returns</li>
                        <li>‚úì Lifetime Access</li>
                        <li>‚úì 24/7 Support</li>
                        <li>‚úì Withdraw Anytime</li>
                    </ul>
                </div>
                
                <div class="package-card" onclick="selectPackage('premium', 2000, 25000)">
                    <div class="package-name">‚≠ê Premium</div>
                    <div class="package-price">Pay Ksh 2,000</div>
                    <div class="package-bonus">Ksh 25,000</div>
                    <p style="color: var(--kenya-red); font-weight: 700; margin-bottom: 20px;">Instant Bonus! üî•</p>
                    <ul class="package-features">
                        <li>‚úì Ksh 25,000 Instant Credit</li>
                        <li>‚úì 12% Monthly Returns</li>
                        <li>‚úì Priority Support</li>
                        <li>‚úì Fast Withdrawals</li>
                        <li>‚úì 5% Referral Bonus</li>
                    </ul>
                </div>
                
                <div class="package-card" onclick="selectPackage('elite', 5000, 50000)">
                    <div class="package-name">üíé Elite</div>
                    <div class="package-price">Pay Ksh 5,000</div>
                    <div class="package-bonus">Ksh 50,000</div>
                    <p style="color: var(--kenya-red); font-weight: 700; margin-bottom: 20px;">Instant Bonus! VIP</p>
                    <ul class="package-features">
                        <li>‚úì Ksh 50,000 Instant Credit</li>
                        <li>‚úì 15% Monthly Returns</li>
                        <li>‚úì VIP Support Team</li>
                        <li>‚úì Instant Withdrawals</li>
                        <li>‚úì 10% Referral Bonus</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 3: SIGNUP -->
<div id="signupLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('loginLayer')">Login</button>
    </nav>

    <div class="container" style="max-width: 700px;">
        <div class="card">
            <h2 class="card-title">Register for NYOTA</h2>
            <p id="packageInfo" style="text-align: center; color: #666; margin-bottom: 30px;">Please select a package first</p>
            
            <form onsubmit="return handleSignup(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="signupName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="signupPhone" required placeholder="+254 712 345 678">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signupPassword" required>
                </div>
                
                <h3 style="margin: 30px 0 20px; color: var(--kenya-navy);">Select Payment Method</h3>
                <div class="payment-methods">
                    <div class="payment-method" onclick="selectPayment('mpesa')">
                        <div style="font-size: 36px; margin-bottom: 10px;">üì±</div>
                        <div style="font-weight: 700;">M-Pesa</div>
                    </div>
                    <div class="payment-method" onclick="selectPayment('bank')">
                        <div style="font-size: 36px; margin-bottom: 10px;">üè¶</div>
                        <div style="font-weight: 700;">Bank Transfer</div>
                    </div>
                </div>
                
                <!-- M-Pesa Details -->
                <div id="mpesaDetails" class="payment-details">
                    <h4 style="color: var(--kenya-green); margin-bottom: 15px;">M-Pesa Payment</h4>
                    <div class="payment-info">
                        <div class="payment-label">Till Number</div>
                        <div class="payment-value">7500448</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copy('7500448')">üìã Copy Till Number</button>
                    <div style="background: #fff8dc; padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 13px; line-height: 1.6;">
                        <strong>Steps:</strong><br>
                        1. Go to M-Pesa ‚Üí Lipa na M-Pesa<br>
                        2. Buy Goods & Services<br>
                        3. Enter Till: <strong>7500448</strong><br>
                        4. Enter amount (Ksh <span id="mpesaAmount">1,000</span>)<br>
                        5. Enter PIN and confirm
                    </div>
                </div>
                
                <!-- Bank Details -->
                <div id="bankDetails" class="payment-details">
                    <h4 style="color: var(--kenya-green); margin-bottom: 15px;">Bank Transfer</h4>
                    <div class="payment-info">
                        <div class="payment-label">Bank Name</div>
                        <div class="payment-value" style="font-size: 16px;">Equity Bank</div>
                    </div>
                    <div class="payment-info">
                        <div class="payment-label">Account Name</div>
                        <div class="payment-value" style="font-size: 16px;">Felix Kiprotich Koskei</div>
                    </div>
                    <div class="payment-info">
                        <div class="payment-label">Account Number</div>
                        <div class="payment-value">0310184912409</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copy('0310184912409')">üìã Copy Account Number</button>
                </div>
                
                <div class="form-group" id="proofSection" style="display: none;">
                    <label>Payment Confirmation</label>
                    <textarea id="paymentProof" rows="3" placeholder="Paste M-Pesa/Bank confirmation message..." required></textarea>
                </div>
                
                <button type="submit" class="btn-submit">Complete Registration</button>
            </form>
        </div>
    </div>
</div>

<!-- LAYER 4: LOGIN -->
<div id="loginLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('signupLayer')">Sign Up</button>
    </nav>

    <div class="container" style="max-width: 500px;">
        <div class="card">
            <h2 class="card-title">Welcome Back</h2>
            <form onsubmit="return handleLogin(event)">
                <div class="form-group">
                    <label>Email or Phone</label>
                    <input type="text" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn-submit">Login</button>
            </form>
        </div>
    </div>
</div>

<!-- LAYER 5: DASHBOARD -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="logout()">Logout</button>
    </nav>

    <div class="container">
        <h2 style="font-size: 36px; font-weight: 900; margin-bottom: 10px;">Habari, <span id="userName">Youth</span>!</h2>
        <p style="color: #666; margin-bottom: 30px;">Welcome to your NYOTA dashboard</p>
        
        <div class="balance-card">
            <div class="balance-label">Portfolio Value</div>
            <div class="balance-amount" id="balance">Ksh 25,000</div>
        </div>

        <div class="action-grid">
            <button class="action-btn" style="background: var(--kenya-green);" onclick="showLayer('investLayer')">üí∞ Invest</button>
            <button class="action-btn" style="background: #0066CC;" onclick="showLayer('withdrawLayer')">üí∏ Withdraw</button>
            <button class="action-btn" style="background: var(--kenya-red);" onclick="showLayer('referralLayer')">üéÅ Referrals</button>
            <button class="action-btn" style="background: var(--kenya-gold); color: #000;" onclick="showLayer('profileLayer')">‚öôÔ∏è Profile</button>
        </div>
    </div>
</div>

<!-- LAYER 6: INVEST -->
<div id="investLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Make Investment</h2>
            <form onsubmit="return handleInvest(event)">
                <div class="form-group">
                    <label>Investment Amount (Ksh)</label>
                    <input type="number" id="investAmount" min="1000" required>
                </div>
                <div class="form-group">
                    <label>Investment Plan</label>
                    <select id="investPlan" required>
                        <option value="">Select plan</option>
                        <option value="starter">Starter - 8% monthly</option>
                        <option value="premium">Premium - 12% monthly</option>
                        <option value="elite">Elite - 15% monthly</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit">Invest Now</button>
            </form>
        </div>
    </div>
</div>

<!-- LAYER 7: WITHDRAW -->
<div id="withdrawLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Request Withdrawal</h2>
            <form onsubmit="return handleWithdraw(event)">
                <div class="form-group">
                    <label>Withdrawal Amount (Ksh)</label>
                    <input type="number" id="withdrawAmount" min="500" required>
                </div>
                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="withdrawMethod" required>
                        <option value="mpesa">M-Pesa</option>
                        <option value="bank">Bank Transfer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>M-Pesa/Account Number</label>
                    <input type="text" id="withdrawAccount" required>
                </div>
                <button type="submit" class="btn-submit">Request Withdrawal</button>
            </form>
        </div>
    </div>
</div>

<!-- LAYER 8: REFERRAL -->
<div id="referralLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Referral Program</h2>
            <div style="text-align: center; padding: 30px;">
                <p style="font-size: 18px; margin-bottom: 20px;">Your Referral Code</p>
                <div style="background: #f5f5f5; padding: 30px; border-radius: 15px; font-size: 36px; font-weight: 900; color: var(--kenya-green); margin-bottom: 20px;">
                    NYOTA2024
                </div>
                <p style="margin-bottom: 30px; line-height: 1.6;">
                    Earn <strong>10% commission</strong> on every referral!<br>
                    Share your code and help grow NYOTA community.
                </p>
                <button onclick="copy('NYOTA2024')" class="btn-submit">üìã Copy Referral Code</button>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 9: PROFILE -->
<div id="profileLayer" class="layer">
    <nav class="navbar">
        <div class="logo-nav" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">ü¶Ö</div>
            <span class="logo-text">NYOTA</span>
        </div>
        <button class="nav-btn" onclick="showLayer('dashboardLayer')">‚Üê Back</button>
    </nav>

    <div class="container" style="max-width: 600px;">
        <div class="card">
            <h2 class="card-title">Profile Settings</h2>
            <form onsubmit="return handleProfile(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="profileName" value="John Doe">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="profileEmail" value="john@example.com">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" id="profilePhone" value="+254712345678">
                </div>
                <div class="form-group">
                    <label>Change Password</label>
                    <input type="password" id="profilePassword" placeholder="Leave blank to keep current">
                </div>
                <button type="submit" class="btn-submit">Update Profile</button>
            </form>
        </div>
    </div>
</div>

<script>
// State
let currentUser = null;
let selectedPackage = null;
let selectedPaymentMethod = null;
let chatOpen = false;

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    createConfetti();
    initChat();
});

// Confetti
function createConfetti() {
    const conf = document.getElementById('confetti');
    if (!conf) return;
    const colors = ['#BB0000', '#006600', '#FFD700', '#0066CC', '#FF6B00'];
    for (let i = 0; i < 60; i++) {
        const c = document.createElement('div');
        c.style.position = 'absolute';
        c.style.width = '12px';
        c.style.height = '12px';
        c.style.left = Math.random() * 100 + '%';
        c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        c.style.animation = `fall ${Math.random() * 5 + 5}s linear infinite ${Math.random() * 5}s`;
        conf.appendChild(c);
    }
}

const style = document.createElement('style');
style.textContent = '@keyframes fall { 0% { transform: translateY(-50px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0.8; } }';
document.head.appendChild(style);

// Navigation
function showLayer(id) {
    document.querySelectorAll('.layer').forEach(l => l.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

// Package Selection
function selectPackage(name, fee, bonus) {
    selectedPackage = { name, fee, bonus };
    document.querySelectorAll('.package-card').forEach(c => c.classList.remove('selected'));
    event.target.closest('.package-card').classList.add('selected');
    
    const info = document.getElementById('packageInfo');
    if (info) {
        info.innerHTML = `<strong style="color: var(--kenya-green);">${name.toUpperCase()}</strong> - Pay Ksh ${fee.toLocaleString()} ‚Ä¢ Get Ksh ${bonus.toLocaleString()} bonus!`;
    }
    
    toast(`üéâ ${name.toUpperCase()} Package Selected!\n\nFee: Ksh ${fee.toLocaleString()}\nBonus: Ksh ${bonus.toLocaleString()}`);
    
    setTimeout(() => showLayer('signupLayer'), 1500);
}

// Payment Method
function selectPayment(method) {
    selectedPaymentMethod = method;
    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
    event.target.closest('.payment-method').classList.add('selected');
    
    document.querySelectorAll('.payment-details').forEach(d => d.classList.remove('active'));
    
    if (method === 'mpesa') {
        document.getElementById('mpesaDetails').classList.add('active');
        const amt = document.getElementById('mpesaAmount');
        if (amt && selectedPackage) amt.textContent = selectedPackage.fee.toLocaleString();
    } else {
        document.getElementById('bankDetails').classList.add('active');
    }
    
    document.getElementById('proofSection').style.display = 'block';
}

// Auth Functions
function handleSignup(e) {
    e.preventDefault();
    
    if (!selectedPackage) {
        toast('‚ùå Please select a package first!');
        return false;
    }
    
    if (!selectedPaymentMethod) {
        toast('‚ùå Please select payment method!');
        return false;
    }
    
    const proof = document.getElementById('paymentProof').value;
    if (!proof) {
        toast('‚ùå Please provide payment confirmation!');
        return false;
    }
    
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    
    currentUser = {
        name,
        email,
        balance: selectedPackage.bonus,
        package: selectedPackage.name
    };
    
    localStorage.setItem('nyotaUser', JSON.stringify(currentUser));
    
    toast(`üéâ WELCOME ${name.toUpperCase()}!\n\n‚úÖ Registration Successful\nüí∞ Bonus: Ksh ${selectedPackage.bonus.toLocaleString()}\nüöÄ Account Activated!`);
    
    setTimeout(() => showLayer('dashboardLayer'), 3000);
    return false;
}

function handleLogin(e) {
    e.preventDefault();
    const stored = JSON.parse(localStorage.getItem('nyotaUser'));
    
    if (!stored) {
        toast('‚ùå No account found. Please register first!');
        return false;
    }
    
    currentUser = stored;
    toast(`‚úÖ Welcome back, ${currentUser.name}!`);
    setTimeout(() => showLayer('dashboardLayer'), 1500);
    return false;
}

function logout() {
    currentUser = null;
    toast('üëã Asante! See you soon!');
    setTimeout(() => showLayer('welcomeLayer'), 1500);
}

// Actions
function handleInvest(e) {
    e.preventDefault();
    const amt = document.getElementById('investAmount').value;
    toast(`‚úÖ Investment Successful!\n\nAmount: Ksh ${amt}\nYour investment is active!`);
    setTimeout(() => showLayer('dashboardLayer'), 2000);
    return false;
}

function handleWithdraw(e) {
    e.preventDefault();
    const amt = document.getElementById('withdrawAmount').value;
    toast(`‚úÖ Withdrawal Requested!\n\nAmount: Ksh ${amt}\nProcessing within 24 hours`);
    setTimeout(() => showLayer('dashboardLayer'), 2000);
    return false;
}

function handleProfile(e) {
    e.preventDefault();
    toast('‚úÖ Profile updated!');
    setTimeout(() => showLayer('dashboardLayer'), 1500);
    return false;
}

// Utilities
function copy(text) {
    navigator.clipboard.writeText(text);
    toast(`‚úÖ Copied: ${text}`);
}

function toast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 5000);
}

// AI Chat
function toggleChat() {
    chatOpen = !chatOpen;
    document.getElementById('chatWindow').classList.toggle('open', chatOpen);
}

function initChat() {
    addBotMsg('üëã Karibu! I am NYOTA AI Assistant.\n\nI can help with:\n‚Ä¢ Packages & pricing\n‚Ä¢ Investment questions\n‚Ä¢ Withdrawals\n‚Ä¢ Account info\n\nHow can I help?');
}

function sendMsg() {
    const input = document.getElementById('chatInput');
    const msg = input.value.trim();
    if (!msg) return;
    
    addUserMsg(msg);
    input.value = '';
    
    setTimeout(() => {
        const reply = getReply(msg.toLowerCase());
        addBotMsg(reply);
    }, 800);
}

function addBotMsg(text) {
    const div = document.createElement('div');
    div.className = 'ai-message bot';
    div.textContent = text;
    document.getElementById('chatMessages').appendChild(div);
    document.getElementById('chatMessages').scrollTop = 9999;
}

function addUserMsg(text) {
    const div = document.createElement('div');
    div.className = 'ai-message user';
    div.textContent = text;
    document.getElementById('chatMessages').appendChild(div);
    document.getElementById('chatMessages').scrollTop = 9999;
}

function getReply(msg) {
    if (msg.includes('package') || msg.includes('price')) {
        return "We have 3 packages:\n\nüí´ Starter: Pay Ksh 1K ‚Üí Get Ksh 12.5K\n‚≠ê Premium: Pay Ksh 2K ‚Üí Get Ksh 25K\nüíé Elite: Pay Ksh 5K ‚Üí Get Ksh 50K\n\nAll include monthly returns!";
    }
    if (msg.includes('payment') || msg.includes('till')) {
        return "Payment methods:\n\nüì± M-Pesa Till: 7500448\nüè¶ Bank: Equity Bank\nAccount: 0310184912409\nName: Felix Kiprotich Koskei";
    }
    if (msg.includes('withdraw')) {
        return "Withdrawals:\n\n‚Ä¢ Minimum: Ksh 500\n‚Ä¢ Processing: 24 hours\n‚Ä¢ Methods: M-Pesa or Bank\n‚Ä¢ Fee: 2%";
    }
    if (msg.includes('hello') || msg.includes('hi') || msg.includes('habari')) {
        return "Habari! üëã Welcome to NYOTA!\n\nHow can I assist you today?";
    }
    return "I can help with packages, payments, withdrawals, and account info. What would you like to know?";
}

console.log('‚úÖ NYOTA Fund Platform Complete!');
console.log('üá∞üá™ Kuza, Imarisha, Endeza Vijana!');
</script>

</body>
</html>
